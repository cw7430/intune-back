{
  "id": "1cf47a8c-7b1f-4823-ac26-579cfc0156db",
  "prevId": "80dbef51-3199-4d1c-a99a-667bf0de4fa3",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "chat.message": {
      "name": "message",
      "schema": "chat",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "message_id_seq",
            "schema": "chat",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "room_id": {
          "name": "room_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "room_member_id": {
          "name": "room_member_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_type": {
          "name": "message_type",
          "type": "message_type",
          "typeSchema": "chat",
          "primaryKey": false,
          "notNull": true,
          "default": "'TEXT'"
        },
        "is_deleted": {
          "name": "is_deleted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_activate_message": {
          "name": "ix_activate_message",
          "columns": [
            {
              "expression": "room_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_deleted_message": {
          "name": "ix_deleted_message",
          "columns": [
            {
              "expression": "room_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "deleted_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_message_member_room": {
          "name": "fk_message_member_room",
          "tableFrom": "message",
          "tableTo": "room_member",
          "schemaTo": "chat",
          "columnsFrom": [
            "room_member_id",
            "room_id"
          ],
          "columnsTo": [
            "id",
            "room_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "pk_message": {
          "name": "pk_message",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "ck_message_deleted_state": {
          "name": "ck_message_deleted_state",
          "value": "(\n        (\"chat\".\"message\".\"is_deleted\" IS NOT TRUE AND \"chat\".\"message\".\"deleted_at\" IS NULL)\n        OR\n        (\"chat\".\"message\".\"is_deleted\" IS TRUE AND \"chat\".\"message\".\"deleted_at\" IS NOT NULL)\n      )"
        },
        "ck_message_type": {
          "name": "ck_message_type",
          "value": "(\n        ((\"chat\".\"message\".\"message_type\" = 'TEXT') AND (\"chat\".\"message\".\"message\" IS NOT NULL))\n        OR\n        ((\"chat\".\"message\".\"message_type\" <> 'TEXT') AND (\"chat\".\"message\".\"message\" IS NULL))\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "chat.room": {
      "name": "room",
      "schema": "chat",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "room_id_seq",
            "schema": "chat",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "is_deleted": {
          "name": "is_deleted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_active_room_updated_at": {
          "name": "ix_active_room_updated_at",
          "columns": [
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"chat\".\"room\".\"is_deleted\" IS NOT TRUE",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_delete_room_deleted_at": {
          "name": "ix_delete_room_deleted_at",
          "columns": [
            {
              "expression": "deleted_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"chat\".\"room\".\"is_deleted\" IS TRUE",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "pk_room": {
          "name": "pk_room",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "ck_room_deleted_state": {
          "name": "ck_room_deleted_state",
          "value": "(\n        (\"chat\".\"room\".\"is_deleted\" IS NOT TRUE AND \"chat\".\"room\".\"deleted_at\" IS NULL)\n        OR\n        (\"chat\".\"room\".\"is_deleted\" IS TRUE AND \"chat\".\"room\".\"deleted_at\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "chat.room_member": {
      "name": "room_member",
      "schema": "chat",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "room_member_id_seq",
            "schema": "chat",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "room_id": {
          "name": "room_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "is_accepted": {
          "name": "is_accepted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "last_read_message_id": {
          "name": "last_read_message_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_room_member_last_read_message": {
          "name": "ix_room_member_last_read_message",
          "columns": [
            {
              "expression": "last_read_message_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_room_member": {
          "name": "fk_room_member",
          "tableFrom": "room_member",
          "tableTo": "room",
          "schemaTo": "chat",
          "columnsFrom": [
            "room_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "fk_user_room_member": {
          "name": "fk_user_room_member",
          "tableFrom": "room_member",
          "tableTo": "user",
          "schemaTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "pk_room_member": {
          "name": "pk_room_member",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "uq_member_room_composite": {
          "name": "uq_member_room_composite",
          "nullsNotDistinct": false,
          "columns": [
            "id",
            "room_id"
          ]
        },
        "uq_user_room": {
          "name": "uq_user_room",
          "nullsNotDistinct": false,
          "columns": [
            "user_id",
            "room_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "user.native_user": {
      "name": "native_user",
      "schema": "user",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "password_hash": {
          "name": "password_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "fk_native_user": {
          "name": "fk_native_user",
          "tableFrom": "native_user",
          "tableTo": "user",
          "schemaTo": "user",
          "columnsFrom": [
            "id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "pk_native_user": {
          "name": "pk_native_user",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "user.profile_image": {
      "name": "profile_image",
      "schema": "user",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "profile_image_id_seq",
            "schema": "user",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "user_id": {
          "name": "user_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "original_name": {
          "name": "original_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "mime_type": {
          "name": "mime_type",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "indexes": {
        "uq_profile_image_default": {
          "name": "uq_profile_image_default",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"user\".\"profile_image\".\"is_default\" IS TRUE",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_profile_image_user_created_at": {
          "name": "ix_profile_image_user_created_at",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_profile_image_user": {
          "name": "fk_profile_image_user",
          "tableFrom": "profile_image",
          "tableTo": "user",
          "schemaTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "pk_profile_image": {
          "name": "pk_profile_image",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "user.refresh_token": {
      "name": "refresh_token",
      "schema": "user",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "refresh_token_id_seq",
            "schema": "user",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "user_id": {
          "name": "user_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "expired_at": {
          "name": "expired_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "ix_refresh_token_user": {
          "name": "ix_refresh_token_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_refresh_token_expire": {
          "name": "ix_refresh_token_expire",
          "columns": [
            {
              "expression": "expired_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_refresh_token_user": {
          "name": "fk_refresh_token_user",
          "tableFrom": "refresh_token",
          "tableTo": "user",
          "schemaTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "pk_refresh_token": {
          "name": "pk_refresh_token",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "uq_active_refresh_token": {
          "name": "uq_active_refresh_token",
          "nullsNotDistinct": false,
          "columns": [
            "token"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "user.social_user": {
      "name": "social_user",
      "schema": "user",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "social_user_id_seq",
            "schema": "user",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "user_id": {
          "name": "user_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "provider_user_id": {
          "name": "provider_user_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "fk_native_user": {
          "name": "fk_native_user",
          "tableFrom": "social_user",
          "tableTo": "user",
          "schemaTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "pk_social_user": {
          "name": "pk_social_user",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "uq_social_user_provider": {
          "name": "uq_social_user_provider",
          "nullsNotDistinct": false,
          "columns": [
            "user_id",
            "provider",
            "provider_user_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "ck_social_provider": {
          "name": "ck_social_provider",
          "value": "\"user\".\"social_user\".\"provider\" IN ('GOOGLE', 'NAVER')"
        }
      },
      "isRLSEnabled": false
    },
    "user.user": {
      "name": "user",
      "schema": "user",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "user_id_seq",
            "schema": "user",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "nick_name": {
          "name": "nick_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "gender": {
          "name": "gender",
          "type": "gender",
          "typeSchema": "user",
          "primaryKey": false,
          "notNull": false
        },
        "auth_type": {
          "name": "auth_type",
          "type": "auth_type",
          "typeSchema": "user",
          "primaryKey": false,
          "notNull": true,
          "default": "'NATIVE'"
        },
        "auth_role": {
          "name": "auth_role",
          "type": "auth_role",
          "typeSchema": "user",
          "primaryKey": false,
          "notNull": true,
          "default": "'USER'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp (6) with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "uq_user_email": {
          "name": "uq_user_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"user\".\"user\".\"auth_type\" <> 'SOCIAL' AND \"user\".\"user\".\"auth_role\" <> 'LEFT'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_active_user_created_at": {
          "name": "ix_active_user_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"user\".\"user\".\"auth_role\" <> 'LEFT'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_delete_user_deleted_at": {
          "name": "ix_delete_user_deleted_at",
          "columns": [
            {
              "expression": "deleted_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"user\".\"user\".\"auth_role\" = 'LEFT'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "pk_user": {
          "name": "pk_user",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "ck_user_deleted_state": {
          "name": "ck_user_deleted_state",
          "value": "(\n          (\"user\".\"user\".\"auth_role\" <> 'LEFT' AND \"user\".\"user\".\"deleted_at\" IS NULL)\n          OR\n          (\"user\".\"user\".\"auth_role\" = 'LEFT' AND \"user\".\"user\".\"deleted_at\" IS NOT NULL)\n          )"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {
    "chat.message_type": {
      "name": "message_type",
      "schema": "chat",
      "values": [
        "TEXT",
        "IMAGE",
        "FILE"
      ]
    },
    "user.auth_role": {
      "name": "auth_role",
      "schema": "user",
      "values": [
        "USER",
        "ADMIN",
        "LEFT"
      ]
    },
    "user.auth_type": {
      "name": "auth_type",
      "schema": "user",
      "values": [
        "NATIVE",
        "SOCIAL",
        "CROSS"
      ]
    },
    "user.gender": {
      "name": "gender",
      "schema": "user",
      "values": [
        "MALE",
        "FEMALE"
      ]
    }
  },
  "schemas": {
    "chat": "chat",
    "user": "user"
  },
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}